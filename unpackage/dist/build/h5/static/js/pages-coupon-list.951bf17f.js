(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-list"],{"0a5d":function(t,e,n){"use strict";n.r(e);var i=n("8bf5"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"122b":function(t,e,n){"use strict";var i=n("2682"),a=n.n(i);a.a},"1de5":function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"1e93":function(t,e,n){"use strict";n.r(e);var i=n("87b1"),a=n("aaa0");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("122b");var c,s=n("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"63fd8e4d",null,!1,i["a"],c);e["default"]=r.exports},"24ad":function(t,e,n){"use strict";n.r(e);var i=n("fdf0"),a=n("0a5d");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("e157");var c,s=n("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"145c7c38",null,!1,i["a"],c);e["default"]=r.exports},2682:function(t,e,n){var i=n("ff0e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("263f777a",i,!0,{sourceMap:!1,shadowMode:!1})},4934:function(t,e,n){"use strict";var i=n("a75d"),a=n.n(i);a.a},"551e":function(t,e,n){var i=n("5837");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("700b1aad",i,!0,{sourceMap:!1,shadowMode:!1})},5837:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".uni-load-more[data-v-145c7c38]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:%?80?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.uni-load-more__text[data-v-145c7c38]{font-size:%?28?%;color:#999}.uni-load-more__img[data-v-145c7c38]{height:24px;width:24px;margin-right:10px}.uni-load-more__img>uni-view[data-v-145c7c38]{position:absolute}.uni-load-more__img>uni-view uni-view[data-v-145c7c38]{width:6px;height:2px;border-top-left-radius:1px;border-bottom-left-radius:1px;background:#999;position:absolute;opacity:.2;-webkit-transform-origin:50%;transform-origin:50%;-webkit-animation:load-data-v-145c7c38 1.56s ease infinite;animation:load-data-v-145c7c38 1.56s ease infinite}.uni-load-more__img>uni-view uni-view[data-v-145c7c38]:nth-child(1){-webkit-transform:rotate(90deg);transform:rotate(90deg);top:2px;left:9px}.uni-load-more__img>uni-view uni-view[data-v-145c7c38]:nth-child(2){-webkit-transform:rotate(180deg);transform:rotate(180deg);top:11px;right:0}.uni-load-more__img>uni-view uni-view[data-v-145c7c38]:nth-child(3){-webkit-transform:rotate(270deg);transform:rotate(270deg);bottom:2px;left:9px}.uni-load-more__img>uni-view uni-view[data-v-145c7c38]:nth-child(4){top:11px;left:0}.load1[data-v-145c7c38],\n.load2[data-v-145c7c38],\n.load3[data-v-145c7c38]{height:24px;width:24px}.load2[data-v-145c7c38]{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.load3[data-v-145c7c38]{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.load1 uni-view[data-v-145c7c38]:nth-child(1){-webkit-animation-delay:0s;animation-delay:0s}.load2 uni-view[data-v-145c7c38]:nth-child(1){-webkit-animation-delay:.13s;animation-delay:.13s}.load3 uni-view[data-v-145c7c38]:nth-child(1){-webkit-animation-delay:.26s;animation-delay:.26s}.load1 uni-view[data-v-145c7c38]:nth-child(2){-webkit-animation-delay:.39s;animation-delay:.39s}.load2 uni-view[data-v-145c7c38]:nth-child(2){-webkit-animation-delay:.52s;animation-delay:.52s}.load3 uni-view[data-v-145c7c38]:nth-child(2){-webkit-animation-delay:.65s;animation-delay:.65s}.load1 uni-view[data-v-145c7c38]:nth-child(3){-webkit-animation-delay:.78s;animation-delay:.78s}.load2 uni-view[data-v-145c7c38]:nth-child(3){-webkit-animation-delay:.91s;animation-delay:.91s}.load3 uni-view[data-v-145c7c38]:nth-child(3){-webkit-animation-delay:1.04s;animation-delay:1.04s}.load1 uni-view[data-v-145c7c38]:nth-child(4){-webkit-animation-delay:1.17s;animation-delay:1.17s}.load2 uni-view[data-v-145c7c38]:nth-child(4){-webkit-animation-delay:1.3s;animation-delay:1.3s}.load3 uni-view[data-v-145c7c38]:nth-child(4){-webkit-animation-delay:1.43s;animation-delay:1.43s}@-webkit-keyframes load-data-v-145c7c38{0%{opacity:1}100%{opacity:.2}}",""]),t.exports=e},"6b80":function(t,e,n){t.exports=n.p+"static/img/coupon_bg.bdb707aa.png"},"851d":function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"u-search",props:{shape:{type:String,default:"round"},bgColor:{type:String,default:"#f2f2f2"},placeholder:{type:String,default:"请输入关键字"},clearabled:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0},actionStyle:{type:Object,default:function(){return{}}},actionText:{type:String,default:"搜索"},inputAlign:{type:String,default:"left"},disabled:{type:Boolean,default:!1},animation:{type:Boolean,default:!1},borderColor:{type:String,default:"none"},value:{type:String,default:""},height:{type:[Number,String],default:64},inputStyle:{type:Object,default:function(){return{}}},maxlength:{type:[Number,String],default:-1},searchIconColor:{type:String,default:""},color:{type:String,default:"#606266"},placeholderColor:{type:String,default:"#909399"},margin:{type:String,default:"0"},searchIcon:{type:String,default:"search"}},data:function(){return{keyword:"",showClear:!1,show:!1,focused:this.focus}},watch:{keyword:function(t){this.$emit("input",t),this.$emit("change",t)},value:{immediate:!0,handler:function(t){this.keyword=t}}},computed:{showActionBtn:function(){return!(this.animation||!this.showAction)},borderStyle:function(){return this.borderColor?"1px solid ".concat(this.borderColor):"none"},getMaxlength:function(){return Number(this.maxlength)}},methods:{inputChange:function(t){this.keyword=t.detail.value},clear:function(){var t=this;this.keyword="",this.$nextTick((function(){t.$emit("clear")}))},search:function(t){this.$emit("search",t.detail.value),uni.hideKeyboard()},custom:function(){this.$emit("custom",this.keyword),uni.hideKeyboard()},getFocus:function(){this.focused=!0,this.animation&&this.showAction&&(this.show=!0),this.$emit("focus",this.keyword)},blur:function(){this.focused=!1,this.show=!1,this.$emit("blur",this.keyword)}}};e.default=i},"87b1":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uSearch:n("d2bd").default,uIcon:n("3be6").default,uRow:n("0327").default,uCol:n("bb0e").default,uButton:n("a6db").default,uniLoadMore:n("24ad").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("u-search",{attrs:{"bg-color":"#fff",placeholder:t.i18n.searchMerchant,clearabled:!0,"show-action":!1,"action-text":t.i18n.search,animation:!0},on:{search:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),t._l(t.merchantList,(function(e){return e.couponList.length>0?n("v-uni-view",{staticClass:"coupon-list"},[n("v-uni-view",{staticClass:"coupon-title",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.navMerchant(e)}}},[t._v(t._s(e.merchantName)),n("u-icon",{attrs:{name:"arrow-right"}})],1),t._l(e.couponList,(function(e){return n("v-uni-view",{staticClass:"coupon-list-item"},[n("u-row",[n("u-col",{attrs:{span:"4"}},[n("v-uni-view",{staticClass:"coupon-left"},[n("v-uni-view",{staticClass:"c1"},["CASH"==e.type?n("v-uni-text",{staticClass:"amount"},[t._v(t._s(e.benefitCash))]):t._e(),"DISCOUNT"==e.type?n("v-uni-text",{staticClass:"discount"},[t._v(t._s(e.benefitDiscount/10))]):t._e()],1),n("v-uni-view",{staticClass:"c2"},[e.conditionAmount>0?n("v-uni-text",[t._v(t._s(t.i18n.coupon.full)+t._s(e.conditionAmount)+t._s(t.i18n.coupon.available))]):n("v-uni-text",[t._v(t._s(t.i18n.coupon.noThreshold))])],1)],1)],1),n("u-col",{staticClass:"coupon-right",attrs:{span:"8"}},[n("v-uni-view",{staticClass:"c1"},["0"==e.benefitType?n("v-uni-text",[t._v(t._s(t.i18n.coupon.benefitType0))]):t._e(),"1"==e.benefitType?n("v-uni-text",[t._v(t._s(t.i18n.coupon.benefitType1))]):t._e()],1),n("v-uni-view",{staticClass:"c2"},[1==e.validType?n("v-uni-text",[t._v(t._s(t.i18n.coupon.endDate)+t._s(e.endDate))]):t._e(),2==e.validType?n("v-uni-text",[t._v(t._s(t.i18n.coupon.receive)+t._s(e.validDays)+t._s(t.i18n.coupon.validDays))]):t._e()],1),n("v-uni-view",{staticClass:"c3"},[n("u-button",{attrs:{plain:!0,size:"mini ",type:"error"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.getCoupon(e)}}},[t._v(t._s(t.i18n.coupon.getCoupon))])],1)],1)],1)],1)}))],2):t._e()})),n("uni-load-more",{attrs:{status:t.loadingType}})],2)},o=[]},"8bf5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uni-load-more",props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},color:{type:String,default:"#777777"}},data:function(){return{contentText:{contentdown:this.$i18nMsg().index.publics.pullUpShow,contentrefresh:this.$i18nMsg().index.publics.loading,contentnomore:this.$i18nMsg().index.publics.noMoreData}}}};e.default=i},"9e94":function(t,e,n){"use strict";var i=n("4ea4");n("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("5530")),o=i(n("24ad")),c=n("2f62"),s={components:{uniLoadMore:o.default},data:function(){return{searchKey:"",pageNo:1,pageSize:10,merchantList:[],total:0,loadingType:""}},onLoad:function(t){uni.setNavigationBarTitle({title:this.i18n.couponCenter}),this.searchCoupon()},onReachBottom:function(){"more"===this.loadingType&&(this.pageNo=this.pageNo+1,this.searchCoupon())},computed:(0,a.default)({i18n:function(){return this.$i18nMsg().index}},(0,c.mapState)(["hasLogin","userInfo","footPrint"])),methods:{navMerchant:function(t){uni.navigateTo({url:"/pages/merchant/detail?id="+t.merchantUuid})},search:function(t){this.resetPage(),this.searchCoupon()},searchCoupon:function(){var t=this,e={startIndex:(this.pageNo-1)*this.pageSize,pageSize:this.pageSize,merchantName:this.searchKey},n=["HAS_COUPON"];this.hasLogin&&(e.userUuid=this.userInfo.userUuid),this.searchKey&&n.push("MERCHANTNAME"),e.keyArray=n,this.loadingType="loading",this.$api.request.merchantCouponList(e,(function(e){if("0"===e.body.status.statusCode){var n=e.body.data.merchants;t.merchantList=t.merchantList.concat(n),t.total=e.body.data.total,t.merchantList.length>=t.total?t.loadingType="noMore":t.loadingType="more"}else t.loadingType="more",t.$api.msg(e.body.status.errorDesc)}),!0)},getCoupon:function(t){var e=this;this.hasLogin?this.$api.request.getCoupon({actionType:"RECEIVE",couponDTO:{couponUuid:t.couponUuid},userDTO:{userUuid:this.userInfo.userUuid},receiveChannel:"SELF"},(function(t){"0"===t.body.status.statusCode?e.$api.msg(e.i18n.coupon.getSuccess):e.$api.msg(t.body.status.errorDesc)}),!1):uni.navigateTo({url:"/pages/public/login"})},resetPage:function(){this.merchantList=[],this.total=0,this.pageNo=1}}};e.default=s},a75d:function(t,e,n){var i=n("ec96");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("f3fd26b4",i,!0,{sourceMap:!1,shadowMode:!1})},aaa0:function(t,e,n){"use strict";n.r(e);var i=n("9e94"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},bde8:function(t,e,n){"use strict";n.r(e);var i=n("851d"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},c1b8:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uIcon:n("3be6").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"u-search",style:{margin:t.margin}},[n("v-uni-view",{staticClass:"u-content",style:{backgroundColor:t.bgColor,borderRadius:"round"==t.shape?"100rpx":"10rpx",border:t.borderStyle,height:t.height+"rpx"}},[n("v-uni-view",{staticClass:"u-icon-wrap"},[n("u-icon",{staticClass:"u-clear-icon",attrs:{size:30,name:t.searchIcon,color:t.searchIconColor?t.searchIconColor:t.color}})],1),n("v-uni-input",{staticClass:"u-input",style:[{textAlign:t.inputAlign,color:t.color,backgroundColor:t.bgColor},t.inputStyle],attrs:{"confirm-type":"search",value:t.value,disabled:t.disabled,maxlength:t.getMaxlength,focus:t.focus,"placeholder-class":"u-placeholder-class",placeholder:t.placeholder,"placeholder-style":"color: "+t.placeholderColor,type:"text"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.blur.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputChange.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.getFocus.apply(void 0,arguments)}}}),t.keyword&&t.clearabled&&t.focused?n("v-uni-view",{staticClass:"u-close-wrap",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[n("u-icon",{staticClass:"u-clear-icon",attrs:{name:"close-circle-fill",size:"34",color:"#c0c4cc"}})],1):t._e()],1),n("v-uni-view",{staticClass:"u-action",class:[t.showActionBtn||t.show?"u-action-active":""],style:[t.actionStyle],on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.custom.apply(void 0,arguments)}}},[t._v(t._s(t.actionText))])],1)},o=[]},d2bd:function(t,e,n){"use strict";n.r(e);var i=n("c1b8"),a=n("bde8");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("4934");var c,s=n("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"84598810",null,!1,i["a"],c);e["default"]=r.exports},e157:function(t,e,n){"use strict";var i=n("551e"),a=n.n(i);a.a},ec96:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\nuni-image[data-v-84598810]{display:inline-block;will-change:transform}uni-view[data-v-84598810],\nuni-text[data-v-84598810]{box-sizing:border-box}\n.u-search[data-v-84598810]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;flex:1}.u-content[data-v-84598810]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?18?%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.u-clear-icon[data-v-84598810]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.u-input[data-v-84598810]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;line-height:1;margin:0 %?10?%;color:#909399}.u-close-wrap[data-v-84598810]{width:%?40?%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:50%}.u-placeholder-class[data-v-84598810]{color:#909399}.u-action[data-v-84598810]{font-size:%?28?%;color:#303133;width:0;overflow:hidden;-webkit-transition:all .3s;transition:all .3s;white-space:nowrap;text-align:center}.u-action-active[data-v-84598810]{width:%?80?%;margin-left:%?10?%}',""]),t.exports=e},fdf0:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-load-more"},[n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.status&&t.showIcon,expression:"status === 'loading' && showIcon"}],staticClass:"uni-load-more__img"},[n("v-uni-view",{staticClass:"load1"},[n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}})],1),n("v-uni-view",{staticClass:"load2"},[n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}})],1),n("v-uni-view",{staticClass:"load3"},[n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}})],1)],1),n("v-uni-text",{staticClass:"uni-load-more__text",style:{color:t.color}},[t._v(t._s("more"===t.status?t.contentText.contentdown:"loading"===t.status?t.contentText.contentrefresh:t.contentText.contentnomore))])],1)},o=[]},ff0e:function(t,e,n){var i=n("24fb"),a=n("1de5"),o=n("6b80");e=i(!1);var c=a(o);e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-63fd8e4d]{background-color:#f8f8f8}.content[data-v-63fd8e4d]{margin:%?20?%}\n/* 列表 */.coupon-list[data-v-63fd8e4d]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin-top:%?20?%;padding:0 %?20?% %?20?% %?20?%;background-color:#fff;border-radius:%?20?%}.coupon-list .coupon-title[data-v-63fd8e4d]{font-size:%?30?%;color:#000;font-weight:700;padding:%?20?% 0}.coupon-list .coupon-list-item[data-v-63fd8e4d]{width:100%;height:110px;margin:%?10?% 0;background-image:url('+c+');background-repeat:no-repeat;background-size:100% 100%;border-radius:5px}.coupon-list .coupon-list-item .coupon-left[data-v-63fd8e4d]{text-align:center;color:#fff}.coupon-list .coupon-list-item .coupon-left .c1[data-v-63fd8e4d]{height:80px;line-height:80px}.coupon-list .coupon-list-item .coupon-left .c1 .amount[data-v-63fd8e4d]{font-size:%?100?%;font-weight:900}.coupon-list .coupon-list-item .coupon-left .c1 .amount[data-v-63fd8e4d]:before{content:"￥";font-size:%?32?%}.coupon-list .coupon-list-item .coupon-left .c1 .discount[data-v-63fd8e4d]{font-size:%?100?%;font-weight:900}.coupon-list .coupon-list-item .coupon-left .c1 .discount[data-v-63fd8e4d]:after{content:"折";font-size:%?32?%}.coupon-list .coupon-list-item .coupon-left .c2[data-v-63fd8e4d]{font-size:%?24?%}.coupon-list .coupon-list-item .coupon-right[data-v-63fd8e4d]{color:#fff;text-align:center}.coupon-list .coupon-list-item .coupon-right .c1[data-v-63fd8e4d]{padding-top:%?20?%}.coupon-list .coupon-list-item .coupon-right .c2[data-v-63fd8e4d]{padding-top:%?10?%;font-size:%?24?%}.coupon-list .coupon-list-item .coupon-right .c3[data-v-63fd8e4d]{padding-top:%?30?%}body.?%PAGE?%[data-v-63fd8e4d]{background-color:#f8f8f8}',""]),t.exports=e}}]);