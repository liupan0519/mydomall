{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/Administrator/Documents/HBuilderProjects/b2b2c-user/pages/money/pay.vue?9ee6","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/b2b2c-user/pages/money/pay.vue?e684","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/b2b2c-user/pages/money/pay.vue?ec75","uni-app:///pages/money/pay.vue","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/b2b2c-user/pages/money/pay.vue?7b4a","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/b2b2c-user/pages/money/pay.vue?f5bf"],"names":["createPage","Page"],"mappings":"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","file":"pages/money/pay.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/money/pay.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./pay.vue?vue&type=template&id=5f7de3a0&\"\nvar renderjs\nimport script from \"./pay.vue?vue&type=script&lang=js&\"\nexport * from \"./pay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pay.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/money/pay.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=template&id=5f7de3a0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"app\">\r\n\t\t<view class=\"price-box\">\r\n\t\t\t<text>{{i18n.pay.amount}}</text>\r\n\t\t\t<text class=\"price\">{{order.actualAmount}}</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"pay-type-list\">\r\n\t\t\t<view class=\"type-item b-b\" @click=\"changePayType(1)\">\r\n\t\t\t\t<text class=\"icon yticon icon-weixinzhifu\"></text>\r\n\t\t\t\t<view class=\"con\">\r\n\t\t\t\t\t<text class=\"tit\">{{i18n.pay.wxpay}}</text>\r\n\t\t\t\t\t<text>{{i18n.pay.recommendWxpay}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<label class=\"radio\">\r\n\t\t\t\t\t<radio value=\"\" :color=\"baseColor\" :checked='payType == 1' />\r\n\t\t\t\t\t</radio>\r\n\t\t\t\t</label>\r\n\t\t\t</view>\r\n\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t<view class=\"type-item b-b\" @click=\"changePayType(2)\">\r\n\t\t\t\t<text class=\"icon yticon icon-alipay\"></text>\r\n\t\t\t\t<view class=\"con\">\r\n\t\t\t\t\t<text class=\"tit\">{{i18n.pay.alipay}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<label class=\"radio\">\r\n\t\t\t\t\t<radio value=\"\" :color=\"baseColor\" :checked='payType == 2' />\r\n\t\t\t\t\t</radio>\r\n\t\t\t\t</label>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"type-item b-b\" @click=\"changePayType(4)\">\r\n\t\t\t\t<text class=\"icon yticon icon-alipay\"></text>\r\n\t\t\t\t<view class=\"con\">\r\n\t\t\t\t\t<text class=\"tit\">PayPal支付</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<label class=\"radio\">\r\n\t\t\t\t\t<radio value=\"\" :color=\"baseColor\" :checked='payType == 4' />\r\n\t\t\t\t\t</radio>\r\n\t\t\t\t</label>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<view class=\"type-item\" @click=\"changePayType(3)\">\r\n\t\t\t\t<text class=\"icon yticon icon-erjiye-yucunkuan\"></text>\r\n\t\t\t\t<view class=\"con\">\r\n\t\t\t\t\t<text class=\"tit\">{{i18n.pay.balancePay}}</text>\r\n\t\t\t\t\t<text>{{i18n.pay.availableBalance}} {{userInfo.availableBalance}}円</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<label class=\"radio\">\r\n\t\t\t\t\t<radio value=\"\" :color=\"baseColor\" :checked='payType == 3' />\r\n\t\t\t\t\t</radio>\r\n\t\t\t\t</label>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<text class=\"mix-btn\" @click=\"confirmWx\">{{i18n.pay.confirm}}</text>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t<text class=\"mix-btn\" @click=\"confirm\">{{i18n.pay.confirm}}</text>\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations\r\n\t} from 'vuex';\r\n\t// #ifdef H5 || APP-PLUS\r\n\t//微信支付报错\r\n\t//const wx = require('weixin-js-sdk');\r\n\t// #endif\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpayType: 1,\r\n\t\t\t\torderNo: '',\r\n\t\t\t\tpOrderNo: '',\r\n\t\t\t\torder: {},\r\n\t\t\t\tsuscribeMsgList: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ti18n() {\r\n\t\t\t\treturn this.$i18nMsg().index\r\n\t\t\t},\r\n\t\t\t...mapState(['hasLogin', 'userInfo', 'footPrint', 'applicationConfig'])\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\ttitle: this.i18n.pay.title\r\n\t\t\t})\r\n\t\t\tthis.orderNo = options.orderNo; //非拆分订单\r\n\t\t\tthis.pOrderNo = options.pOrderNo; //拆分订单\r\n\t\t\tif (this.orderNo)\r\n\t\t\t\tthis.inquiryOrder(this.orderNo);\r\n\t\t\telse if (this.pOrderNo)\r\n\t\t\t\tthis.inquiryPOrder(this.pOrderNo);\r\n\t\t\tthis.inquirySuscribeMsg();\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t//选择支付方式\r\n\t\t\tchangePayType(type) {\r\n\t\t\t\tthis.payType = type;\r\n\t\t\t},\r\n\t\t\t//确认支付\r\n\t\t\tconfirmWx: function() {\r\n\t\t\t\tuni.requestSubscribeMessage({\r\n\t\t\t\t\t// 订单模板消息\r\n\t\t\t\t\ttmplIds: this.suscribeMsgList,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log('订单模板消息订阅成功');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (this.payType === 1) {\r\n\t\t\t\t\tthis.wechatPay();\r\n\t\t\t\t} else if (this.payType === 2) {\r\n\t\t\t\t\tthis.alipayPay();\r\n\t\t\t\t} else if (this.payType === 3) {\r\n\t\t\t\t\tthis.balancePay();\r\n\t\t\t\t} else if (this.payType === 4) {\r\n\t\t\t\t\tthis.paypalPay();\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t//确认支付\r\n\t\t\tconfirm: function() {\r\n\t\t\t\tif (this.payType === 1) {\r\n\t\t\t\t\tthis.wechatPay();\r\n\t\t\t\t} else if (this.payType === 2) {\r\n\t\t\t\t\tthis.alipayPay();\r\n\t\t\t\t} else if (this.payType === 3) {\r\n\t\t\t\t\tthis.balancePay();\r\n\t\t\t\t} else if (this.payType === 4) {\r\n\t\t\t\t\tthis.paypalPay();\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\twechatPay() {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tthis.wechatPayH5();\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tthis.wechatPayApp();\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tthis.wechatPayMP();\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\twechatPayApp() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tvar options = {\r\n\t\t\t\t\torderNo: that.orderNo,\r\n\t\t\t\t\tpOrderNo: that.pOrderNo\r\n\t\t\t\t};\r\n\t\t\t\tthat.$api.request.wechatPayApp(options, res => {\r\n\t\t\t\t\tif (res.body.status.statusCode == 0) {\r\n\t\t\t\t\t\tvar data = res.body.data;\r\n\t\t\t\t\t\tthis.invokeWechatPayApp(data); //客户端调起微信支付\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.body.status.errorDesc);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\twechatPayH5() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tvar options = {\r\n\t\t\t\t\torderNo: that.orderNo,\r\n\t\t\t\t\tpOrderNo: that.pOrderNo,\r\n\t\t\t\t\topenId: this.userInfo.openId\r\n\t\t\t\t};\r\n\t\t\t\tthat.$api.request.wechatPayH5(options, res => {\r\n\t\t\t\t\tif (res.body.status.statusCode == 0) {\r\n\t\t\t\t\t\tvar data = res.body.data;\r\n\t\t\t\t\t\tthis.invokeWechatPayH5(data); //客户端调起微信支付\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.body.status.errorDesc);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinvokeWechatPayH5(order) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tvar options = {\r\n\t\t\t\t\turl: document.URL\r\n\t\t\t\t};\r\n\t\t\t\tthat.$api.request.getSignature(options, res => {\r\n\t\t\t\t\tif (res.body.status.statusCode == 0) {\r\n\t\t\t\t\t\tvar jsSignature = res.body.data;\r\n\t\t\t\t\t\twx.config({\r\n\t\t\t\t\t\t\tdebug: false,\r\n\t\t\t\t\t\t\tappId: jsSignature.appId,\r\n\t\t\t\t\t\t\ttimestamp: jsSignature.timestamp,\r\n\t\t\t\t\t\t\tnonceStr: jsSignature.nonceStr,\r\n\t\t\t\t\t\t\tsignature: jsSignature.signature,\r\n\t\t\t\t\t\t\tjsApiList: ['chooseWXPay']\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\twx.ready(function() {\r\n\t\t\t\t\t\t\twx.chooseWXPay({\r\n\t\t\t\t\t\t\t\ttimestamp: order.timestamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n\t\t\t\t\t\t\t\tnonceStr: order.nonceStr, // 支付签名随机串，不长于 32 位\r\n\t\t\t\t\t\t\t\tpackage: order.packageStr, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n\t\t\t\t\t\t\t\tsignType: 'MD5', // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n\t\t\t\t\t\t\t\tpaySign: order.signature, // 支付签名\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '/pages/money/paySuccess'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinvokeWechatPayApp(order) {\r\n\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\tprovider: 'wxpay', //微信支付\r\n\t\t\t\t\torderInfo: {\r\n\t\t\t\t\t\t\"appid\": order.appId,\r\n\t\t\t\t\t\t\"noncestr\": order.nonceStr,\r\n\t\t\t\t\t\t\"package\": order.packageStr,\r\n\t\t\t\t\t\t\"partnerid\": order.partnerId,\r\n\t\t\t\t\t\t\"prepayid\": order.prepayId,\r\n\t\t\t\t\t\t\"timestamp\": order.timestamp,\r\n\t\t\t\t\t\t\"sign\": order.signature\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\turl: '/pages/money/paySuccess'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\turl: '/pages/order/order'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\twechatPayMP() {\r\n\t\t\t\t//微信小程序支付\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t\tconsole.log(loginRes.code);\r\n\t\t\t\t\t\tthat.$api.request.wechatPay({\r\n\t\t\t\t\t\t\torderNo: that.orderNo,\r\n\t\t\t\t\t\t\tpOrderNo: that.pOrderNo,\r\n\t\t\t\t\t\t\tcode: loginRes.code\r\n\t\t\t\t\t\t}, res => {\r\n\t\t\t\t\t\t\tif (res.body.status.statusCode === '0') {\r\n\t\t\t\t\t\t\t\tvar data = res.body.data;\r\n\t\t\t\t\t\t\t\tconsole.log(res.body.data);\r\n\t\t\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t\t\t\t\ttimeStamp: data.timestamp,\r\n\t\t\t\t\t\t\t\t\tnonceStr: data.nonceStr,\r\n\t\t\t\t\t\t\t\t\tpackage: data.packageStr,\r\n\t\t\t\t\t\t\t\t\tsignType: 'MD5',\r\n\t\t\t\t\t\t\t\t\tpaySign: data.signature,\r\n\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '/pages/money/paySuccess'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('fail:' + JSON.stringify(err));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log(res.body.status.errorDesc);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//PayPal支付\r\n\t\t\tpaypalPay() {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tthis.paypalApp();\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\r\n\t\t\t//支付宝支付\r\n\t\t\talipayPay() {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tthis.alipayH5();\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tthis.alipayApp();\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t//支付宝在H5中支付\r\n\t\t\talipayH5() {\r\n\t\t\t\tthis.$api.request.alipay({\r\n\t\t\t\t\torderNo: this.orderNo,\r\n\t\t\t\t\tpOrderNo: this.pOrderNo,\r\n\t\t\t\t\tpaymentMethod: this.payType\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif (res.body.status.statusCode === '0') {\r\n\t\t\t\t\t\tlet alipayForm = res.body.data.alipayForm;\r\n\t\t\t\t\t\tlet div = document.createElement('div'); // 创建div\r\n\t\t\t\t\t\tdiv.innerHTML = alipayForm; // 将返回的form 放入div\r\n\t\t\t\t\t\tdocument.body.appendChild(div);\r\n\t\t\t\t\t\tdocument.forms[0].acceptCharset = 'UTF-8'\r\n\t\t\t\t\t\tdocument.forms[0].submit();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$api.msg(res.body.status.errorDesc);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//支付宝在APP中支付\r\n\t\t\talipayApp() {\r\n\t\t\t\tthis.$api.request.alipayApp({\r\n\t\t\t\t\torderNo: this.orderNo,\r\n\t\t\t\t\tpOrderNo: this.pOrderNo\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif (res.body.status.statusCode === '0') {\r\n\t\t\t\t\t\tlet alipayForm = res.body.data.alipayForm;\r\n\t\t\t\t\t\talert(alipayForm);\r\n\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\tprovider: 'alipay', //支付宝支付\r\n\t\t\t\t\t\t\torderInfo: alipayForm,\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\talert('success');\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '/pages/money/paySuccess'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\t\talert('fail');\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '/pages/order/order'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$api.msg(res.body.status.errorDesc);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpaypalApp() {\r\n\t\t\t\tconst dariusPayPal = uni.requireNativePlugin('Darius-PayPal');\r\n\t\t\t\talert(dariusPayPal)\r\n\t\t\t\tdariusPayPal.show({\r\n\t\t\t\t\t\"command\": \"paypal\",\r\n\t\t\t\t\t\"merchantName\": \"Howfresh\",\r\n\t\t\t\t\t\"PayPalEnvironment\": \"Sandbox\",\r\n\t\t\t\t\t\"amount\": \"10\",\r\n\t\t\t\t\t\"acceptCreditCards\": \"0\",\r\n\t\t\t\t\t\"sn\": \"D123456789\",\r\n\t\t\t\t\t\"notify_url\":\"http://api.howfresh.jp/paypal/paySuccess\"\r\n\t\t\t\t}, result=>{\r\n\t\t\t\t\talert(result)\r\n\t\t\t\t\t/* uni.showToast({\r\n\t\t\t\t\t\ttitle: result\r\n\t\t\t\t\t}) */\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\t//余额支付\r\n\t\t\tbalancePay() {\r\n\t\t\t\tthis.$api.request.balancePay({\r\n\t\t\t\t\torderNo: this.orderNo,\r\n\t\t\t\t\tpOrderNo: this.pOrderNo,\r\n\t\t\t\t\tpaymentMethod: this.payType\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif (res.body.status.statusCode === '0') {\r\n\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\turl: '/pages/money/paySuccess'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$api.msg(res.body.status.errorDesc);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//查询订单\r\n\t\t\tinquiryPOrder(pOrderNo) {\r\n\t\t\t\tthis.$api.request.orderPaymentAmount({\r\n\t\t\t\t\tpOrderNo: pOrderNo\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif (res.body.status.statusCode === '0') {\r\n\t\t\t\t\t\tthis.order = res.body.data;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.body.status.errorDesc);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//查询订单\r\n\t\t\tinquiryOrder(orderNo) {\r\n\t\t\t\tthis.$api.request.orderDetail({\r\n\t\t\t\t\torderNo: orderNo\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif (res.body.status.statusCode === '0') {\r\n\t\t\t\t\t\tthis.order = res.body.data;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.body.status.errorDesc);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//查询订阅消息\r\n\t\t\tinquirySuscribeMsg() {\r\n\t\t\t\tthis.$api.request.wxSuscribeMsg({}, res => {\r\n\t\t\t\t\tif (res.body.status.statusCode === '0') {\r\n\t\t\t\t\t\tthis.suscribeMsgList = res.body.data.suscribeMsgList;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.body.status.errorDesc);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang='scss'>\r\n\t.app {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.price-box {\r\n\t\tbackground-color: #fff;\r\n\t\theight: 265upx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tfont-size: 28upx;\r\n\t\tcolor: #909399;\r\n\r\n\t\t.price {\r\n\t\t\tfont-size: 50upx;\r\n\t\t\tcolor: #303133;\r\n\t\t\tmargin-top: 12upx;\r\n\r\n\t\t\t&:after {\r\n\t\t\t\tcontent: '円';\r\n\t\t\t\tfont-size: 40upx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.pay-type-list {\r\n\t\tmargin-top: 20upx;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding-left: 60upx;\r\n\r\n\t\t.type-item {\r\n\t\t\theight: 120upx;\r\n\t\t\tpadding: 20upx 0;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding-right: 60upx;\r\n\t\t\tfont-size: 30upx;\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\r\n\t\t.icon {\r\n\t\t\twidth: 100upx;\r\n\t\t\tfont-size: 52upx;\r\n\t\t}\r\n\r\n\t\t.icon-erjiye-yucunkuan {\r\n\t\t\tcolor: #fe8e2e;\r\n\t\t}\r\n\r\n\t\t.icon-weixinzhifu {\r\n\t\t\tcolor: #36cb59;\r\n\t\t}\r\n\r\n\t\t.icon-alipay {\r\n\t\t\tcolor: #01aaef;\r\n\t\t}\r\n\r\n\t\t.tit {\r\n\t\t\tfont-size: $font-lg;\r\n\t\t\tcolor: $font-color-dark;\r\n\t\t\tmargin-bottom: 4upx;\r\n\t\t}\r\n\r\n\t\t.con {\r\n\t\t\tflex: 1;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tfont-size: $font-sm;\r\n\t\t\tcolor: $font-color-light;\r\n\t\t}\r\n\t}\r\n\r\n\t.mix-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 630upx;\r\n\t\theight: 80upx;\r\n\t\tmargin: 80upx auto 30upx;\r\n\t\tfont-size: $font-lg;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: $base-color;\r\n\t\tborder-radius: 10upx;\r\n\t\tbox-shadow: 1px 2px 5px rgba(85, 170, 127, 0.4);\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1605086116296\n      var cssReload = require(\"C:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}